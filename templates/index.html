<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>Cancer Detection System</title>
    <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' rel='stylesheet'>
    <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css' rel='stylesheet'>
    <link href='/static/css/style.css' rel='stylesheet'>
</head>
<body>
    <nav class='navbar navbar-expand-lg navbar-dark bg-primary'>
        <div class='container'>
            <a class='navbar-brand' href='#'>
                <i class='fas fa-heartbeat me-2'></i>
                Cancer Detection System
            </a>
            <button class='navbar-toggler' type='button' data-bs-toggle='collapse' data-bs-target='#navbarNav'>
                <span class='navbar-toggler-icon'></span>
            </button>
            <div class='collapse navbar-collapse' id='navbarNav'>
                <ul class='navbar-nav ms-auto'>
                    <li class='nav-item'>
                        <a class='nav-link active' href='#home'>Home</a>
                    </li>
                    <li class='nav-item'>
                        <a class='nav-link' href='#patients'>Patients</a>
                    </li>
                    <li class='nav-item'>
                        <a class='nav-link' href='#scans'>Scans</a>
                    </li>
                    <li class='nav-item'>
                        <a class='nav-link' href='#upload'>Upload</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class='container-fluid'>
        <!-- Home Section -->
        <section id='home' class='py-5'>
            <div class='container'>
                <div class='row align-items-center'>
                    <div class='col-lg-6'>
                        <h1 class='display-4 fw-bold text-primary mb-4'>
                            Advanced Cancer Detection
                        </h1>
                        <p class='lead mb-4'>
                            Leveraging cutting-edge AI technology with SAM (Segment Anything Model) 
                            for accurate and early cancer detection in medical imaging.
                        </p>
                        <div class='row text-center'>
                            <div class='col-md-4'>
                                <div class='feature-card'>
                                    <i class='fas fa-brain fa-3x text-primary mb-3'></i>
                                    <h5>AI-Powered</h5>
                                    <p>Advanced machine learning algorithms</p>
                                </div>
                            </div>
                            <div class='col-md-4'>
                                <div class='feature-card'>
                                    <i class='fas fa-shield-alt fa-3x text-primary mb-3'></i>
                                    <h5>Accurate</h5>
                                    <p>High precision detection rates</p>
                                </div>
                            </div>
                            <div class='col-md-4'>
                                <div class='feature-card'>
                                    <i class='fas fa-clock fa-3x text-primary mb-3'></i>
                                    <h5>Fast</h5>
                                    <p>Real-time analysis results</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class='col-lg-6'>
                        <div class='hero-image'>
                            <img src='/static/medical-ai.jpg' 
                                 alt='Medical AI' class='img-fluid rounded shadow'
                                 onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjhmOWZhIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzZjNzU3ZCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk1lZGljYWwgQUkgSW1hZ2U8L3RleHQ+PC9zdmc+';">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Patients Section -->
        <section id='patients' class='py-5 bg-light'>
            <div class='container'>
                <h2 class='text-center mb-5'>Patient Management</h2>
                <div class='row'>
                    <div class='col-md-4'>
                        <div class='card'>
                            <div class='card-header'>
                                <h5><i class='fas fa-user-plus me-2'></i>Add New Patient</h5>
                            </div>
                            <div class='card-body'>
                                <form id='patientForm'>
                                    <div class='mb-3'>
                                        <label for='patientName' class='form-label'>Full Name</label>
                                        <input type='text' class='form-control' id='patientName' required>
                                    </div>
                                    <div class='mb-3'>
                                        <label for='patientAge' class='form-label'>Age</label>
                                        <input type='number' class='form-control' id='patientAge' required>
                                    </div>
                                    <div class='mb-3'>
                                        <label for='patientGender' class='form-label'>Gender</label>
                                        <select class='form-select' id='patientGender' required>
                                            <option value=''>Select Gender</option>
                                            <option value='Male'>Male</option>
                                            <option value='Female'>Female</option>
                                            <option value='Other'>Other</option>
                                        </select>
                                    </div>
                                    <div class='mb-3'>
                                        <label for='patientEmail' class='form-label'>Email</label>
                                        <input type='email' class='form-control' id='patientEmail' required>
                                    </div>
                                    <div class='mb-3'>
                                        <label for='patientPhone' class='form-label'>Phone</label>
                                        <input type='tel' class='form-control' id='patientPhone' required>
                                    </div>
                                    <button type='submit' class='btn btn-primary w-100'>
                                        <i class='fas fa-save me-2'></i>Save Patient
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class='col-md-8'>
                        <div class='card'>
                            <div class='card-header'>
                                <h5><i class='fas fa-users me-2'></i>Patient List</h5>
                            </div>
                            <div class='card-body'>
                                <div class='table-responsive'>
                                    <table class='table table-striped' id='patientsTable'>
                                        <thead>
                                            <tr>
                                                <th>ID</th>
                                                <th>Name</th>
                                                <th>Age</th>
                                                <th>Gender</th>
                                                <th>Email</th>
                                                <th>Phone</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id='patientsTableBody'>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Upload Section -->
        <section id='upload' class='py-5'>
            <div class='container'>
                <h2 class='text-center mb-5'>Medical Scan Analysis</h2>
                
                <!-- Analysis Type Selection -->
                <div class='row mb-4'>
                    <div class='col-12 text-center'>
                        <div class='btn-group' role='group' id='analysisTypeGroup'>
                            <input type='radio' class='btn-check' name='analysisType' id='patientAnalysis' value='patient' checked>
                            <label class='btn btn-outline-primary' for='patientAnalysis'>
                                <i class='fas fa-user me-2'></i>Patient Analysis
                            </label>
                            
                            <input type='radio' class='btn-check' name='analysisType' id='quickAnalysis' value='quick'>
                            <label class='btn btn-outline-success' for='quickAnalysis'>
                                <i class='fas fa-bolt me-2'></i>Quick Analysis
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Patient Analysis Form -->
                <div id='patientAnalysisForm'>
                    <div class='row justify-content-center'>
                        <div class='col-lg-8'>
                            <div class='card'>
                                <div class='card-header'>
                                    <h5><i class='fas fa-user me-2'></i>Patient-Based Analysis</h5>
                                </div>
                                <div class='card-body'>
                                    <form id='scanForm'>
                                        <div class='mb-3'>
                                            <label for='patientSelect' class='form-label'>Select Patient</label>
                                            <select class='form-select' id='patientSelect' required>
                                                <option value=''>Choose a patient...</option>
                                            </select>
                                        </div>
                                        <div class='mb-3'>
                                            <label for='scanType' class='form-label'>Scan Type</label>
                                            <select class='form-select' id='scanType' required>
                                                <option value='breast'>Breast Cancer</option>
                                                <option value='lung'>Lung Cancer</option>
                                                <option value='brain'>Brain Tumor</option>
                                                <option value='skin'>Skin Cancer</option>
                                            </select>
                                        </div>
                                        <div class='mb-3'>
                                            <label for='scanImage' class='form-label'>Upload Medical Image</label>
                                            <div class='row'>
                                                <div class='col-md-6'>
                                                    <input type='file' class='form-control' id='scanImage' 
                                                           accept='image/*' required>
                                                    <div class='form-text'>Supported formats: JPG, PNG, DICOM</div>
                                                </div>
                                                <div class='col-md-6'>
                                                    <button type='button' class='btn btn-outline-primary w-100' id='startCameraBtn'>
                                                        <i class='fas fa-camera me-2'></i>Start Camera
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Camera Section -->
                                        <div class='mb-3' id='cameraSection' style='display: none;'>
                                            <div class='card'>
                                                <div class='card-header'>
                                                    <h6 class='mb-0'><i class='fas fa-camera me-2'></i>Camera Capture</h6>
                                                </div>
                                                <div class='card-body'>
                                                    <div class='text-center mb-3'>
                                                        <video id='cameraVideo' autoplay playsinline style='max-width: 100%; max-height: 300px; border: 1px solid #ddd; border-radius: 8px;'></video>
                                                    </div>
                                                    <div class='row' id='cameraControls' style='display: none;'>
                                                        <div class='col-6'>
                                                            <button type='button' class='btn btn-success w-100' id='captureBtn'>
                                                                <i class='fas fa-camera me-2'></i>Capture
                                                            </button>
                                                        </div>
                                                        <div class='col-6'>
                                                            <button type='button' class='btn btn-danger w-100' id='stopCameraBtn'>
                                                                <i class='fas fa-stop me-2'></i>Stop Camera
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <canvas id='captureCanvas' style='display: none;'></canvas>
                                        </div>
                                        <div class='mb-3'>
                                            <div id='imagePreview' class='text-center' style='display: none;'>
                                                <img id='previewImg' class='img-fluid rounded' style='max-height: 300px;'>
                                            </div>
                                        </div>
                                        <button type='submit' class='btn btn-primary btn-lg w-100'>
                                            <i class='fas fa-upload me-2'></i>Upload and Analyze
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Analysis Form -->
                <div id='quickAnalysisForm' style='display: none;'>
                    <div class='row justify-content-center'>
                        <div class='col-lg-8'>
                            <div class='card'>
                                <div class='card-header'>
                                    <h5><i class='fas fa-bolt me-2'></i>Quick Analysis (No Patient Data Required)</h5>
                                </div>
                                <div class='card-body'>
                                    <form id='quickScanForm'>
                                        <div class='mb-3'>
                                            <label for='quickScanType' class='form-label'>Scan Type</label>
                                            <select class='form-select' id='quickScanType' required>
                                                <option value='breast'>Breast Cancer</option>
                                                <option value='lung'>Lung Cancer</option>
                                                <option value='brain'>Brain Tumor</option>
                                                <option value='skin'>Skin Cancer</option>
                                            </select>
                                        </div>
                                        <div class='mb-3'>
                                            <label for='quickScanImage' class='form-label'>Upload Medical Image</label>
                                            <div class='row'>
                                                <div class='col-md-6'>
                                                    <input type='file' class='form-control' id='quickScanImage' 
                                                           accept='image/*' required>
                                                    <div class='form-text'>Supported formats: JPG, PNG, DICOM</div>
                                                </div>
                                                <div class='col-md-6'>
                                                    <button type='button' class='btn btn-outline-success w-100' id='quickStartCameraBtn'>
                                                        <i class='fas fa-camera me-2'></i>Start Camera
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Quick Camera Section -->
                                        <div class='mb-3' id='quickCameraSection' style='display: none;'>
                                            <div class='card'>
                                                <div class='card-header'>
                                                    <h6 class='mb-0'><i class='fas fa-camera me-2'></i>Camera Capture</h6>
                                                </div>
                                                <div class='card-body'>
                                                    <div class='text-center mb-3'>
                                                        <video id='quickCameraVideo' autoplay playsinline style='max-width: 100%; max-height: 300px; border: 1px solid #ddd; border-radius: 8px;'></video>
                                                    </div>
                                                    <div class='row' id='quickCameraControls' style='display: none;'>
                                                        <div class='col-6'>
                                                            <button type='button' class='btn btn-success w-100' id='quickCaptureBtn'>
                                                                <i class='fas fa-camera me-2'></i>Capture
                                                            </button>
                                                        </div>
                                                        <div class='col-6'>
                                                            <button type='button' class='btn btn-danger w-100' id='quickStopCameraBtn'>
                                                                <i class='fas fa-stop me-2'></i>Stop Camera
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <canvas id='quickCaptureCanvas' style='display: none;'></canvas>
                                        </div>
                                        <div class='mb-3'>
                                            <div id='quickImagePreview' class='text-center' style='display: none;'>
                                                <img id='quickPreviewImg' class='img-fluid rounded' style='max-height: 300px;'>
                                            </div>
                                        </div>
                                        <button type='submit' class='btn btn-success btn-lg w-100'>
                                            <i class='fas fa-bolt me-2'></i>Quick Analyze
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section id='results' class='py-5 bg-light' style='display: none;'>
            <div class='container'>
                <h2 class='text-center mb-5'>Analysis Results</h2>
                <div class='row'>
                    <div class='col-lg-6'>
                        <div class='card'>
                            <div class='card-header'>
                                <h5><i class='fas fa-image me-2'></i>Original Image</h5>
                            </div>
                            <div class='card-body text-center'>
                                <img id='originalImage' class='img-fluid rounded' style='max-height: 400px;'>
                            </div>
                        </div>
                    </div>
                    <div class='col-lg-6'>
                        <div class='card'>
                            <div class='card-header'>
                                <h5><i class='fas fa-search-plus me-2'></i>Detected Areas</h5>
                            </div>
                            <div class='card-body text-center'>
                                <img id='annotatedImage' class='img-fluid rounded' style='max-height: 400px;'>
                                <div class='mt-3'>
                                    <div class='row text-center'>
                                        <div class='col-4'>
                                            <div class='d-flex align-items-center justify-content-center'>
                                                <div class='detection-legend high-confidence me-2'></div>
                                                <small>High Risk</small>
                                            </div>
                                        </div>
                                        <div class='col-4'>
                                            <div class='d-flex align-items-center justify-content-center'>
                                                <div class='detection-legend moderate-confidence me-2'></div>
                                                <small>Moderate Risk</small>
                                            </div>
                                        </div>
                                        <div class='col-4'>
                                            <div class='d-flex align-items-center justify-content-center'>
                                                <div class='detection-legend low-confidence me-2'></div>
                                                <small>Low Risk</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class='row mt-4'>
                    <div class='col-12'>
                        <div class='card'>
                            <div class='card-header'>
                                <h5><i class='fas fa-chart-line me-2'></i>Detailed Analysis</h5>
                            </div>
                            <div class='card-body'>
                                <div id='analysisResults'>
                                    <div class='alert alert-info'>
                                        <i class='fas fa-spinner fa-spin me-2'></i>
                                        Analyzing image...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Scans History Section -->
        <section id='scans' class='py-5'>
            <div class='container'>
                <h2 class='text-center mb-5'>Scan History</h2>
                <div class='card'>
                    <div class='card-body'>
                        <div class='table-responsive'>
                            <table class='table table-striped' id='scansTable'>
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Patient</th>
                                        <th>Scan Type</th>
                                        <th>Result</th>
                                        <th>Confidence</th>
                                        <th>Status</th>
                                        <th>Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id='scansTableBody'>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal for Scan Details -->
    <div class='modal fade' id='scanModal' tabindex='-1'>
        <div class='modal-dialog modal-lg'>
            <div class='modal-content'>
                <div class='modal-header'>
                    <h5 class='modal-title'>Scan Details</h5>
                    <button type='button' class='btn-close' data-bs-dismiss='modal'></button>
                </div>
                <div class='modal-body' id='scanModalBody'>
                </div>
            </div>
        </div>
    </div>

    <script src='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js'></script>
    <script src='/static/js/app.js'></script>
</body>
</html>
